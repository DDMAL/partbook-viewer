<!doctype html>
    <html lang="en">
        <head>
            <meta charset="utf-8" />
            <title>Diva.js Demo Page</title>
            <link rel="stylesheet" href="diva.js/build/css/diva.min.css" />
            <link rel="stylesheet" href="partbookViewer.css" />
            <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
            <![endif]-->
            <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
            <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
            <script src="diva.js/build/js/diva.min.js" type="text/javascript"></script>
            <script src="partbookViewer.js" type="text/javascript"></script>

            <script type="text/javascript">
                function generateDivaOptions(num){
                    return {
                        adaptivePadding: 0,
                        enableAutoHeight: false,
                        enableAutoTitle: false,
                        enableAutoWidth: false,   
                        enableCanvas: false,        
                        enableDownload: false,
                        enableFullscreen: false,
                        enableGridIcon: false,
                        enableLinkIcon: false,
                        fixedHeightGrid: false,
                        iipServerURL: "http://diva.simssa.ca/fcgi-bin/iipsrv.fcgi",
                        objectData: "json/partbook" + num + ".json",
                        imageDir: "/srv/images/dow_partbooks/" + num,
                        viewerWidthPadding: 0,
                        viewerHeightPadding: 0,
                        zoomLevel: 2
                    };
                }
                $(document).ready(function() {
                    
                    $('#diva-wrapper1').diva(generateDivaOptions(984));
                    $('#diva-wrapper2').diva(generateDivaOptions(985));
                    $('#diva-wrapper3').diva(generateDivaOptions(986));
                    $('#diva-wrapper4').diva(generateDivaOptions(987));
                    $('#diva-wrapper5').diva(generateDivaOptions(988));

                    var loadedCount = 0;
                    diva.Events.subscribe('ViewerDidLoad', function(){
                        loadedCount += 1;
                        if(loadedCount == 5)
                        {
                            $('.diva-tools-right').addClass('diva-tools-right-alt').removeClass('diva-tools-right');
                            $('.diva-wrapper').draggable({
                                start: function(e, ui){
                                    $('.diva-wrapper').css('z-index', 2);
                                    ui.helper.css('z-index', 3);
                                }
                            });
                        }
                    });
                });
            </script>
        </head>
        <body>
            <div id="diva-wrapper1" class="diva-wrapper"></div>
            <div id="diva-wrapper2" class="diva-wrapper"></div>
            <div id="diva-wrapper3" class="diva-wrapper"></div>
            <div id="diva-wrapper4" class="diva-wrapper"></div>
            <div id="diva-wrapper5" class="diva-wrapper"></div>
        </body>
    </html>
